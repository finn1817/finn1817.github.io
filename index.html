<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dfinn.me - Terminal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --terminal-bg: #1e1e1e;
      --terminal-text: #50fa7b;
      --terminal-prompt: #bd93f9;
      --terminal-header: #8be9fd;
      --terminal-border: #6272a4;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Courier New', monospace;
      background-color: var(--terminal-bg);
      color: var(--terminal-text);
      margin: 0;
      overflow: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #terminal-container {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #terminal-header {
      background-color: #2c2c2c;
      padding: 5px 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid var(--terminal-border);
    }

    #terminal-title {
      color: var(--terminal-header);
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #terminal-controls {
      display: flex;
      gap: 8px;
    }

    .terminal-button {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      cursor: pointer;
    }

    .button-close {
      background-color: #ff5f56;
    }

    .button-minimize {
      background-color: #ffbd2e;
    }

    .button-expand {
      background-color: #27c93f;
    }

    #status-bar {
      background-color: #343434;
      color: #dddddd;
      padding: 4px 8px;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid var(--terminal-border);
    }

    #status-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    #terminal-window {
      flex: 1;
      overflow: hidden;
      position: relative;
      background-color: var(--terminal-bg);
      padding: 10px;
      display: flex;
      flex-direction: column;
    }

    #output {
      flex: 1;
      overflow-y: auto;
      color: var(--terminal-text);
      font-size: 14px;
      line-height: 1.4;
      white-space: pre-wrap;
      padding-bottom: 10px;
      scrollbar-width: thin;
      scrollbar-color: var(--terminal-border) var(--terminal-bg);
    }

    #output::-webkit-scrollbar {
      width: 8px;
    }

    #output::-webkit-scrollbar-track {
      background: var(--terminal-bg);
    }

    #output::-webkit-scrollbar-thumb {
      background-color: var(--terminal-border);
      border-radius: 4px;
    }

    #input-line {
      display: flex;
      align-items: center;
      padding: 5px 0;
    }

    #prompt {
      color: var(--terminal-prompt);
      margin-right: 10px;
      font-weight: bold;
    }

    #commandInput {
      background: transparent;
      border: none;
      outline: none;
      color: var(--terminal-text);
      font-family: 'Courier New', monospace;
      font-size: 14px;
      width: 100%;
      caret-color: var(--terminal-text);
    }

    .output-line {
      margin-bottom: 2px;
      animation: fadeIn 0.1s ease-out;
    }

    .command-input {
      color: var(--terminal-prompt);
      font-weight: bold;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    a {
      color: #ff79c6;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    #matrix-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      display: none;
    }

    .ascii-art {
      color: #f1fa8c;
      font-weight: bold;
      font-size: 12px;
      white-space: pre;
      line-height: 1.2;
      margin: 10px 0;
    }

    /* Terminal-style cursor */
    #cursor {
      display: inline-block;
      width: 8px;
      height: 15px;
      background-color: var(--terminal-text);
      animation: blink 1s step-end infinite;
      vertical-align: middle;
    }

    @keyframes blink {
      from, to { opacity: 1; }
      50% { opacity: 0; }
    }

    /* Effects */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    @keyframes glitch {
      0% { clip-path: inset(40% 0 61% 0); transform: translate(-5px, -5px); }
      20% { clip-path: inset(92% 0 1% 0); transform: translate(5px, 5px); }
      40% { clip-path: inset(43% 0 1% 0); transform: translate(-5px, 5px); }
      60% { clip-path: inset(25% 0 58% 0); transform: translate(5px, -5px); }
      80% { clip-path: inset(54% 0 7% 0); transform: translate(5px, -5px); }
      100% { clip-path: inset(58% 0 43% 0); transform: translate(-5px, 5px); }
    }

    .glitch-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 0, 0, 0.1);
      z-index: 9999;
      animation: glitch 0.2s alternate-reverse infinite;
      pointer-events: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes hacker {
      0% { background-color: var(--terminal-bg); }
      5% { background-color: #0f0; color: #000; }
      10% { background-color: var(--terminal-bg); }
      15% { background-color: #0f0; color: #000; }
      20% { background-color: var(--terminal-bg); }
      100% { background-color: var(--terminal-bg); }
    }

    .typewriter {
      overflow: hidden;
      border-right: .15em solid var(--terminal-text);
      white-space: nowrap;
      margin: 0 auto;
      animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: var(--terminal-text); }
    }

    .theme-matrix {
      --terminal-bg: #000000;
      --terminal-text: #00ff00;
      --terminal-prompt: #00bb00;
      --terminal-header: #00dd00;
      --terminal-border: #008800;
    }

    .theme-dracula {
      --terminal-bg: #282a36;
      --terminal-text: #f8f8f2;
      --terminal-prompt: #bd93f9;
      --terminal-header: #8be9fd;
      --terminal-border: #6272a4;
    }

    .theme-nord {
      --terminal-bg: #2e3440;
      --terminal-text: #d8dee9;
      --terminal-prompt: #88c0d0;
      --terminal-header: #81a1c1;
      --terminal-border: #4c566a;
    }

    .theme-monokai {
      --terminal-bg: #272822;
      --terminal-text: #f8f8f2;
      --terminal-prompt: #a6e22e;
      --terminal-header: #66d9ef;
      --terminal-border: #75715e;
    }

    .theme-cyberpunk {
      --terminal-bg: #0d0208;
      --terminal-text: #00ff9f;
      --terminal-prompt: #ff00a0;
      --terminal-header: #00b8ff;
      --terminal-border: #8400ff;
    }
    
    /* Weather widget */
    #weather-widget {
      position: absolute;
      top: 50px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      border: 1px solid var(--terminal-border);
      padding: 15px;
      border-radius: 5px;
      display: none;
      color: white;
      z-index: 100;
    }
  </style>
</head>
<body>
  <div id="terminal-container">
    <div id="terminal-header">
      <div id="terminal-title">
        <i class="fa fa-terminal"></i>
        <span>dfinn.me - Terminal</span>
      </div>
      <div id="terminal-controls">
        <div class="terminal-button button-minimize"></div>
        <div class="terminal-button button-expand"></div>
        <div class="terminal-button button-close"></div>
      </div>
    </div>

    <div id="status-bar">
      <div id="status-left">
        <div class="status-item">
          <i class="fa fa-user"></i>
          <span id="username">visitor@dfinn.me</span>
        </div>
        <div class="status-item">
          <i class="fa fa-folder"></i>
          <span id="current-dir">~/</span>
        </div>
      </div>
      <div id="status-right">
        <span id="datetime"></span>
      </div>
    </div>

    <div id="terminal-window">
      <div id="output"></div>
      <div id="input-line">
        <span id="prompt">visitor@dfinn.me:~$</span>
        <input type="text" id="commandInput" autocomplete="off" autofocus />
      </div>
    </div>
  </div>

  <canvas id="matrix-canvas"></canvas>
  
  <div id="weather-widget">
    <h3>Weather</h3>
    <div id="weather-content"></div>
  </div>

  <script>
    // Command history and state variables
    let commandHistory = [];
    let historyIndex = -1;
    let themes = ["default", "matrix", "dracula", "nord", "monokai", "cyberpunk"];
    let currentTheme = "default";
    let matrixActive = false;
    let username = "visitor";
    let currentDir = "~";
    let directoryStructure = {
      "~": {
        type: "directory",
        content: {
          "documents": {
            type: "directory",
            content: {
              "resume.txt": {
                type: "file",
                content: "# Resume\n\nA professional software developer with experience in web development, algorithms, and data structures."
              },
              "notes.txt": {
                type: "file",
                content: "Remember to update the portfolio with the latest projects."
              }
            }
          },
          "projects": {
            type: "directory",
            content: {
              "README.md": {
                type: "file",
                content: "# Projects Directory\n\nThis directory contains links to all my project websites and repositories."
              }
            }
          },
          "welcome.txt": {
            type: "file",
            content: "Welcome to dfinn.me terminal!\nType 'help' to see available commands."
          }
        }
      }
    };

    // ASCII art collection
    const asciiArt = {
      logo: `
 _____  ______ _____ _   _ _   _ 
|  __ \\|  ____|_   _| \\ | | \\ | |
| |  | | |__    | | |  \\| |  \\| |
| |  | |  __|   | | | . \` | . \` |
| |__| | |     _| |_| |\\  | |\\  |
|_____/|_|    |_____|_| \\_|_| \\_|
`,
      computer: `
  .---.
  |   |
  |   |
  |   |
  |   |.--.
  |   |'_\\/_
  |   |((___))
  |   |
  |   |
  |   |
  |   |
  '---'
`,
      pacman: `
  .---.
 /   /|
 |   |'
 |   |
 |   |
 |   |
 \\   \\|
  '---'
`,
    };

    // Collection of programming facts
    const facts = [
      "C++ was created by Bjarne Stroustrup in 1983.",
      "Python is named after Monty Python, not the snake.",
      "The first computer bug was an actual moth found in a Harvard Mark II computer in 1947.",
      "JavaScript was created in just 10 days by Brendan Eich in 1995.",
      "The world's first website is still online: http://info.cern.ch/",
      "The original name for Java was 'Oak'.",
      "The term 'debugging' existed before computer programming.",
      "Linux was created by Linus Torvalds in 1991 while he was a student.",
      "The QWERTY keyboard layout was designed to slow down typing to prevent jamming on mechanical typewriters.",
      "The first programming language was called Fortran (Formula Translation).",
      "The shortest war in history lasted 38 minutes between Britain and Zanzibar in 1896.",
      "Octopuses have three hearts and blue blood.",
      "Ada Lovelace is considered the first computer programmer, writing an algorithm for the Analytical Engine in the 1840s.",
      "Alan Turing cracked the Nazi Enigma code during WWII, shortening the war by an estimated 2-4 years.",
      "Grace Hopper discovered the first computer 'bug' and coined the term 'debugging'."
    ];

    // Collection of programming jokes
    const jokes = [
      "Why do programmers prefer dark mode? Because light attracts bugs!",
      "A programmer's wife tells him: 'Go to the store and get a loaf of bread. If they have eggs, get a dozen.' He comes home with 12 loaves.",
      "How many programmers does it take to change a light bulb? None, that's a hardware problem!",
      "Why do Java developers wear glasses? Because they can't C#!",
      "There are 10 types of people in this world: those who understand binary and those who don't.",
      "A programmer had a problem and decided to use regex to solve it. Now they have two problems.",
      "Why was the JavaScript developer sad? Because they didn't Node how to Express themselves.",
      "What's a computer's favorite snack? Microchips!",
      "Why did the developer go broke? Because they lost their domain in the cloud.",
      "Why don't programmers like nature? It has too many bugs and no debugging tool."
    ];

    // Initialize terminal
    document.addEventListener("DOMContentLoaded", () => {
      updateDateTime();
      setInterval(updateDateTime, 1000);
      
      const outputDiv = document.getElementById("output");
      typeMessage(asciiArt.logo, outputDiv, 5, () => {
        typeMessage("\nWelcome to dfinn.me - Terminal v2.0", outputDiv, 30, () => {
          typeMessage("\nType 'help' to see available commands.\n", outputDiv, 30, () => {
            // Ready for input
            document.getElementById("commandInput").focus();
          });
        });
      });
    });

    // Handle command input
    document.getElementById("commandInput").addEventListener("keydown", function(event) {
      if (event.key === "Enter") {
        handleCommand();
      } else if (event.key === "ArrowUp") {
        // Navigate command history - previous command
        if (commandHistory.length > 0 && historyIndex < commandHistory.length - 1) {
          historyIndex++;
          this.value = commandHistory[commandHistory.length - 1 - historyIndex];
        }
      } else if (event.key === "ArrowDown") {
        // Navigate command history - next command
        if (historyIndex > 0) {
          historyIndex--;
          this.value = commandHistory[commandHistory.length - 1 - historyIndex];
        } else if (historyIndex === 0) {
          historyIndex = -1;
          this.value = "";
        }
      } else if (event.key === "Tab") {
        event.preventDefault();
        autoCompleteCommand(this.value);
      }
    });

    // Auto-complete command
    function autoCompleteCommand(partial) {
      const commands = [
        "help", "clear", "theme", "matrix", "shake", "spin", "glitch", "hacker",
        "random", "add", "subtract", "multiply", "divide", "sqrt", "power",
        "fact", "joke", "projects", "run", "ls", "cd", "cat", "echo", "neofetch",
        "date", "whoami", "weather", "ascii", "banner", "history", "about"
      ];
      
      const matchingCommands = commands.filter(cmd => cmd.startsWith(partial.split(" ")[0]));
      
      if (matchingCommands.length === 1) {
        document.getElementById("commandInput").value = matchingCommands[0];
      } else if (matchingCommands.length > 1) {
        const output = document.getElementById("output");
        output.innerHTML += `\n\nPossible commands:`;
        output.innerHTML += `\n${matchingCommands.join(', ')}`;
        output.innerHTML += `\n\n${document.getElementById("prompt").textContent} `;
        document.getElementById("commandInput").value = partial;
        scrollToBottom();
      }
    }

    // Function to handle commands
    function handleCommand() {
      const inputField = document.getElementById("commandInput");
      const output = document.getElementById("output");
      const command = inputField.value.trim();
      
      if (!command) return;
      
      // Add to command history
      commandHistory.push(command);
      if (commandHistory.length > 50) commandHistory.shift();
      historyIndex = -1;
      
      // Display command with prompt
      output.innerHTML += `\n${document.getElementById("prompt").textContent} ${command}`;
      
      // Process command
      processCommand(command, output);
      
      // Clear input field and scroll to bottom
      inputField.value = "";
      scrollToBottom();
    }

    // Process command function
    function processCommand(command, output) {
      const args = command.split(" ");
      const cmd = args[0].toLowerCase();
      
      switch (cmd) {
        case "help":
          displayHelp(output, args[1]);
          break;
        case "clear":
          output.innerHTML = "";
          break;
        case "theme":
          changeTheme(args[1], output);
          break;
        case "matrix":
          toggleMatrix(output);
          break;
        case "shake":
          applyEffect("shake", output);
          break;
        case "spin":
          applyEffect("spin", output);
          break;
        case "glitch":
          applyEffect("glitch", output);
          break;
        case "hacker":
          applyEffect("hacker", output);
          break;
        case "random":
          handleMathCommand("random", args, output);
          break;
        case "add":
          handleMathCommand("add", args, output);
          break;
        case "subtract":
          handleMathCommand("subtract", args, output);
          break;
        case "multiply":
          handleMathCommand("multiply", args, output);
          break;
        case "divide":
          handleMathCommand("divide", args, output);
          break;
        case "sqrt":
          handleMathCommand("sqrt", args, output);
          break;
        case "power":
          handleMathCommand("power", args, output);
          break;
        case "fact":
          showRandomFact(output);
          break;
        case "joke":
          showRandomJoke(output);
          break;
        case "projects":
          showProjects(output);
          break;
        case "run":
          runProject(args[1], output);
          break;
        case "ls":
          listDirectory(args[1], output);
          break;
        case "cd":
          changeDirectory(args[1], output);
          break;
        case "cat":
          viewFile(args[1], output);
          break;
        case "echo":
          echo(args.slice(1).join(" "), output);
          break;
        case "neofetch":
          showSystemInfo(output);
          break;
        case "date":
          showDate(output);
          break;
        case "whoami":
          output.innerHTML += `\n${username}`;
          break;
        case "weather":
          showWeather(args[1], output);
          break;
        case "ascii":
          showAsciiArt(args[1], output);
          break;
        case "banner":
          createBanner(args.slice(1).join(" "), output);
          break;
        case "history":
          showCommandHistory(output);
          break;
        case "about":
          showAbout(output);
          break;
        default:
          output.innerHTML += `\nCommand not found: ${cmd}. Type 'help' for a list of commands.`;
      }
    }

    // Display help
    function displayHelp(output, topic) {
      if (!topic) {
        output.innerHTML += `
\nAvailable commands:

SYSTEM:
  help [command]  - Show help for all commands or specific command
  clear           - Clear terminal output
  theme [name]    - Change terminal theme (default, matrix, dracula, nord, monokai, cyberpunk)
  neofetch        - Display system information
  about           - About this terminal
  history         - Show command history

NAVIGATION:
  ls [dir]        - List directory contents
  cd [dir]        - Change directory
  cat [file]      - View file contents
  echo [text]     - Print text to terminal

VISUAL EFFECTS:
  matrix          - Toggle Matrix effect
  shake           - Shake the screen
  spin            - Spin the screen
  glitch          - Trigger a glitch effect
  hacker          - Trigger hacker effect
  ascii [art]     - Display ASCII art (logo, computer, pacman)
  banner [text]   - Create ASCII text banner

MATH & UTILITIES:
  random [min] [max]    - Generate a random number
  add [x] [y]           - Add two numbers
  subtract [x] [y]      - Subtract second number from first
  multiply [x] [y]      - Multiply two numbers
  divide [x] [y]        - Divide first number by second
  sqrt [x]              - Square root of a number
  power [x] [y]         - x raised to the power of y

FUN & INFO:
  fact            - Show a random programming fact
  joke            - Tell a programming joke
  date            - Show current date and time
  whoami          - Show current user
  weather [city]  - Show weather for a city

PROJECTS:
  projects        - Show my projects & links
  run [project]   - Run a project (calculator, tictactoe, etc.)

Type 'help [command]' for more information on a specific command.`;
      } else {
        // Help for specific command
        const helpText = {
          help: "help [command] - Show help for all commands or specific command.",
          clear: "clear - Clear the terminal output.",
          theme: "theme [name] - Change terminal theme. Available themes: default, matrix, dracula, nord, monokai, cyberpunk.",
          matrix: "matrix - Toggle Matrix rain effect in the background.",
          shake: "shake - Apply a shake effect to the screen.",
          spin: "spin - Apply a spin effect to the screen.",
          glitch: "glitch - Apply a glitch effect to the screen.",
          hacker: "hacker - Apply a hacker effect to the screen (flashing green).",
          random: "random [min] [max] - Generate a random integer between min and max inclusive.",
          add: "add [x] [y] - Add two numbers together.",
          subtract: "subtract [x] [y] - Subtract the second number from the first.",
          multiply: "multiply [x] [y] - Multiply two numbers together.",
          divide: "divide [x] [y] - Divide the first number by the second.",
          sqrt: "sqrt [x] - Calculate the square root of a number.",
          power: "power [x] [y] - Calculate x raised to the power of y.",
          fact: "fact - Show a random programming or computer science fact.",
          joke: "joke - Tell a random programming joke.",
          projects: "projects - Show a list of my projects and links.",
          run: "run [project] - Open a project in a new tab. Available projects: calculator, tictactoe, conversion, finance, resume, flappy.",
          ls: "ls [dir] - List contents of the current directory or specified directory.",
          cd: "cd [dir] - Change to the specified directory. Use 'cd ..' to go up one level.",
          cat: "cat [file] - View the contents of a file.",
          echo: "echo [text] - Display text on the terminal.",
          neofetch: "neofetch - Display system information in a fancy format.",
          date: "date - Show the current date and time.",
          whoami: "whoami - Show the current username.",
          weather: "weather [city] - Show current weather for the specified city.",
          ascii: "ascii [art] - Display ASCII art. Available options: logo, computer, pacman.",
          banner: "banner [text] - Create an ASCII art banner from text.",
          history: "history - Show command history.",
          about: "about - Display information about this terminal."
        };
        
        if (helpText[topic]) {
          output.innerHTML += `\n${helpText[topic]}`;
        } else {
          output.innerHTML += `\nNo help available for '${topic}'.`;
        }
      }
    }

    // Change theme
    function changeTheme(themeName, output) {
      if (!themeName) {
        output.innerHTML += `\nAvailable themes: ${themes.join(", ")}`;
        output.innerHTML += `\nCurrent theme: ${currentTheme}`;
        return;
      }
      
      themeName = themeName.toLowerCase();
      if (!themes.includes(themeName)) {
        output.innerHTML += `\nTheme '${themeName}' not found. Available themes: ${themes.join(", ")}`;
        return;
      }
      
      // Remove current theme
      document.body.classList.remove(`theme-${currentTheme}`);
      
      // Set new theme
      currentTheme = themeName;
      if (themeName !== "default") {
        document.body.classList.add(`theme-${themeName}`);
      }
      
      output.innerHTML += `\nTheme changed to '${themeName}'.`;
    }

    // Toggle Matrix effect
    function toggleMatrix(output) {
      const canvas = document.getElementById("matrix-canvas");
      
      if (matrixActive) {
        canvas.style.display = "none";
        matrixActive = false;
        output.innerHTML += "\nMatrix effect deactivated.";
      } else {
        canvas.style.display = "block";
        matrixActive = true;
        output.innerHTML += "\nMatrix effect activated.";
        startMatrixEffect();
      }
    }

    // Apply visual effect
    function applyEffect(effect, output) {
      const container = document.getElementById("terminal-container");
      
      switch (effect) {
        case "shake":
          container.style.animation = "shake 0.5s";
          setTimeout(() => container.style.animation = "", 500);
          output.innerHTML += "\nShake effect applied.";
          break;
        case "spin":
          container.style.animation = "spin 2s linear";
          setTimeout(() => container.style.animation = "", 2000);
          output.innerHTML += "\nSpin effect applied.";
          break;
        case "glitch":
          const glitchOverlay = document.createElement("div");
          glitchOverlay.className = "glitch-effect";
          document.body.appendChild(glitchOverlay);
          setTimeout(() => glitchOverlay.remove(), 2000);
          output.innerHTML += "\nGlitch effect applied.";
          break;
        case "hacker":
          document.body.style.animation = "hacker 3s";
          setTimeout(() => document.body.style.animation = "", 3000);
          output.innerHTML += "\nHacker effect applied.";
          break;
      }
    }

    // Handle math commands
    function handleMathCommand(cmd, args, output) {
      switch (cmd) {
        case "random":
          if (args.length === 3) {
            const min = parseInt(args[1]);
            const max = parseInt(args[2]);
            if (!isNaN(min) && !isNaN(max) && min <= max) {
              const randNum = Math.floor(Math.random() * (max - min + 1)) + min;
              output.innerHTML += `\nRandom Number: ${randNum}`;
            } else {
              output.innerHTML += "\nUsage: random [min] [max] (min <= max)";
            }
          } else {
            output.innerHTML += "\nUsage: random [min] [max]";
          }
          break;
        case "add":
        case "subtract":
        case "multiply":
        case "divide":
        case "power":
        if (args.length === 3) {
    const num1 = parseFloat(args[1]);
    const num2 = parseFloat(args[2]);
    if (!isNaN(num1) && !isNaN(num2)) {
      let result;
      switch (cmd) {
        case "add":
          result = num1 + num2;
          break;
        case "subtract":
          result = num1 - num2;
          break;
        case "multiply":
          result = num1 * num2;
          break;
        case "divide":
          result = num2 !== 0 ? num1 / num2 : "Error: Division by zero";
          break;
        case "power":
          result = Math.pow(num1, num2);
          break;
      }
      output.innerHTML += `\nResult: ${result}`;
    } else {
      output.innerHTML += "\nInvalid numbers.";
    }
  } else {
    output.innerHTML += `\nUsage: ${cmd} [x] [y]`;
  }
  break;
case "sqrt":
  if (args.length === 2) {
    const num = parseFloat(args[1]);
    if (!isNaN(num)) {
      if (num >= 0) {
        output.innerHTML += `\nResult: ${Math.sqrt(num)}`;
      } else {
        output.innerHTML += "\nError: Cannot calculate square root of a negative number.";
      }
    } else {
      output.innerHTML += "\nInvalid number.";
    }
  } else {
    output.innerHTML += "\nUsage: sqrt [x]";
  }
  break;
}
}

// Show random fact
function showRandomFact(output) {
  const randomFact = facts[Math.floor(Math.random() * facts.length)];
  output.innerHTML += `\n${randomFact}`;
}

// Show random joke
function showRandomJoke(output) {
  const randomJoke = jokes[Math.floor(Math.random() * jokes.length)];
  output.innerHTML += `\n${randomJoke}`;
}

// Show projects
function showProjects(output) {
  output.innerHTML += `
\nMy Projects:

WEB APPS:
  - Calculator       - A fully functional calculator with history (run calculator)
  - Tic-Tac-Toe      - Classic game of Tic-Tac-Toe (run tictactoe)
  - Unit Conversion  - Convert between various units (run conversion)
  - Finance Checker  - Check financial metrics (run finance)
  - Resume Builder   - Create professional resumes (run resume)
  - Flappy Bird      - Classic Flappy Bird game (run flappy)

OTHER PROJECTS:
  - NATracker        - Journal & Habit Tracker (GitHub)
  - Zillow Database  - Real Estate Database Project (Google Drive)

Use 'run [project]' to open any web app project in a new tab.`;
}

// Run project
function runProject(project, output) {
  if (!project) {
    output.innerHTML += "\nUsage: run [project]";
    output.innerHTML += "\nAvailable projects: calculator, tictactoe, conversion, finance, resume, flappy";
    return;
  }
  
  const projectLinks = {
    "calculator": "https://finn1817.github.io/My-Calculator/",
    "tictactoe": "https://finn1817.github.io/TikTakToeGame/",
    "conversion": "https://finn1817.github.io/Unit-Conversion/",
    "finance": "https://finn1817.github.io/Future-Finance/",
    "resume": "https://finn1817.github.io/Resume-Builder/",
    "flappy": "https://finn1817.github.io/Flappy-Bird/",
    "github": "https://github.com/finn1817/NATracker",
    "drive": "https://drive.google.com/drive/folders/1Sq4B32br7vLmy4TPaHv9eJboiZ0ie2Eo?usp=sharing"
  };
  
  project = project.toLowerCase();
  if (projectLinks[project]) {
    window.open(projectLinks[project], "_blank");
    output.innerHTML += `\nLaunching ${project}...`;
  } else {
    output.innerHTML += `\nProject '${project}' not found.`;
    output.innerHTML += "\nAvailable projects: calculator, tictactoe, conversion, finance, resume, flappy";
  }
}

// List directory
function listDirectory(dirPath, output) {
  let currentPath = getCurrentPath();
  let targetDir = currentPath;
  
  if (dirPath) {
    if (dirPath.startsWith("/")) {
      // Absolute path
      targetDir = navigatePath(dirPath);
    } else {
      // Relative path
      targetDir = navigatePath(currentPath + "/" + dirPath);
    }
  }
  
  if (!targetDir) {
    output.innerHTML += `\nDirectory not found.`;
    return;
  }
  
  if (targetDir.type !== "directory") {
    output.innerHTML += `\n${dirPath} is not a directory.`;
    return;
  }
  
  output.innerHTML += "\n";
  const items = Object.keys(targetDir.content);
  items.sort();
  
  // Show directories first, then files
  const directories = items.filter(item => targetDir.content[item].type === "directory");
  const files = items.filter(item => targetDir.content[item].type === "file");
  
  if (directories.length === 0 && files.length === 0) {
    output.innerHTML += "<empty directory>";
    return;
  }
  
  directories.forEach(dir => {
    output.innerHTML += `<span style="color: var(--terminal-prompt);">${dir}/</span>    `;
  });
  
  if (directories.length > 0 && files.length > 0) {
    output.innerHTML += "\n";
  }
  
  files.forEach(file => {
    output.innerHTML += `${file}    `;
  });
}

// Change directory
function changeDirectory(dirPath, output) {
  if (!dirPath) {
    currentDir = "~";
    updatePrompt();
    return;
  }
  
  let newPath;
  if (dirPath === "..") {
    // Go up one level
    const parts = currentDir.split("/");
    if (parts.length <= 1) {
      newPath = "~";
    } else {
      parts.pop();
      newPath = parts.join("/");
    }
  } else if (dirPath.startsWith("/")) {
    // Absolute path
    newPath = dirPath;
  } else {
    // Relative path
    newPath = currentDir === "~" ? "~/" + dirPath : currentDir + "/" + dirPath;
  }
  
  // Clean up path
  newPath = newPath.replace(/\/+/g, "/");
  if (newPath.endsWith("/") && newPath !== "/") {
    newPath = newPath.slice(0, -1);
  }
  
  const targetDir = navigatePath(newPath);
  if (!targetDir) {
    output.innerHTML += `\nDirectory not found: ${dirPath}`;
    return;
  }
  
  if (targetDir.type !== "directory") {
    output.innerHTML += `\n${dirPath} is not a directory.`;
    return;
  }
  
  currentDir = newPath;
  updatePrompt();
}

// View file
function viewFile(filePath, output) {
  if (!filePath) {
    output.innerHTML += "\nUsage: cat [file]";
    return;
  }
  
  let currentPath = getCurrentPath();
  let targetFile;
  
  if (filePath.startsWith("/")) {
    // Absolute path
    targetFile = navigatePath(filePath);
  } else {
    // Relative path
    targetFile = navigatePath(currentPath + "/" + filePath);
  }
  
  if (!targetFile) {
    output.innerHTML += `\nFile not found: ${filePath}`;
    return;
  }
  
  if (targetFile.type !== "file") {
    output.innerHTML += `\n${filePath} is not a file.`;
    return;
  }
  
  output.innerHTML += `\n${targetFile.content}`;
}

// Echo command
function echo(text, output) {
  output.innerHTML += `\n${text}`;
}

// Show system info (neofetch)
function showSystemInfo(output) {
  const userAgent = navigator.userAgent;
  let os = "Unknown OS";
  let browser = "Unknown Browser";
  
  // Detect OS
  if (userAgent.indexOf("Win") !== -1) os = "Windows";
  else if (userAgent.indexOf("Mac") !== -1) os = "MacOS";
  else if (userAgent.indexOf("Linux") !== -1) os = "Linux";
  else if (userAgent.indexOf("Android") !== -1) os = "Android";
  else if (userAgent.indexOf("iOS") !== -1) os = "iOS";
  
  // Detect Browser
  if (userAgent.indexOf("Chrome") !== -1) browser = "Chrome";
  else if (userAgent.indexOf("Safari") !== -1) browser = "Safari";
  else if (userAgent.indexOf("Firefox") !== -1) browser = "Firefox";
  else if (userAgent.indexOf("Edge") !== -1) browser = "Edge";
  else if (userAgent.indexOf("Opera") !== -1) browser = "Opera";
  
  const screenRes = `${window.screen.width}x${window.screen.height}`;
  const date = new Date().toLocaleString();
  
  output.innerHTML += `
\n<span class="ascii-art">${asciiArt.logo}</span>
\n<span style="color: var(--terminal-header);">System Information</span>
\n-------------------------
\n<span style="color: var(--terminal-prompt);">User:</span> ${username}@dfinn.me
\n<span style="color: var(--terminal-prompt);">OS:</span> ${os}
\n<span style="color: var(--terminal-prompt);">Browser:</span> ${browser}
\n<span style="color: var(--terminal-prompt);">Resolution:</span> ${screenRes}
\n<span style="color: var(--terminal-prompt);">Terminal:</span> dfinn.me v2.0
\n<span style="color: var(--terminal-prompt);">Theme:</span> ${currentTheme}
\n<span style="color: var(--terminal-prompt);">Date:</span> ${date}
\n-------------------------
\n<span style="color: var(--terminal-prompt);">Projects:</span> Calculator, TicTacToe, Unit Conversion, Finance, Resume Builder
\n<span style="color: var(--terminal-prompt);">Effects:</span> Matrix, Shake, Spin, Glitch, Hacker
\n<span style="color: var(--terminal-prompt);">Commands:</span> ${getCommandCount()} available commands
`;
}

// Show date
function showDate(output) {
  const now = new Date();
  output.innerHTML += `\n${now.toLocaleString()}`;
}

// Show weather
function showWeather(city, output) {
  if (!city) {
    output.innerHTML += "\nUsage: weather [city]";
    return;
  }
  
  output.innerHTML += `\nFetching weather for ${city}...`;
  
  // In a real implementation, you would use a weather API here
  // For this demo, we'll show a mock response
  setTimeout(() => {
    const weatherWidget = document.getElementById("weather-widget");
    const weatherContent = document.getElementById("weather-content");
    
    // Mock weather data
    const temp = Math.floor(Math.random() * 35) + 5; // 5 to 40 degrees
    const conditions = ["Sunny", "Partly Cloudy", "Cloudy", "Rainy", "Thunderstorms", "Snowy"][Math.floor(Math.random() * 6)];
    const humidity = Math.floor(Math.random() * 50) + 30; // 30% to 80%
    const wind = Math.floor(Math.random() * 20) + 1; // 1 to 20 mph
    
    weatherContent.innerHTML = `
      <p><strong>${city}</strong></p>
      <p>Temperature: ${temp}°C</p>
      <p>Conditions: ${conditions}</p>
      <p>Humidity: ${humidity}%</p>
      <p>Wind: ${wind} mph</p>
    `;
    
    weatherWidget.style.display = "block";
    
    output.innerHTML += `\n
Current Weather for ${city}:
Temperature: ${temp}°C
Conditions: ${conditions}
Humidity: ${humidity}%
Wind: ${wind} mph
    `;
    
    // Hide widget after 10 seconds
    setTimeout(() => {
      weatherWidget.style.display = "none";
    }, 10000);
  }, 1000);
}

// Show ASCII art
function showAsciiArt(artName, output) {
  if (!artName || !asciiArt[artName]) {
    output.innerHTML += "\nAvailable ASCII art: " + Object.keys(asciiArt).join(", ");
    return;
  }
  
  output.innerHTML += `\n<span class="ascii-art">${asciiArt[artName]}</span>`;
}

// Create ASCII banner
function createBanner(text, output) {
  if (!text) {
    output.innerHTML += "\nUsage: banner [text]";
    return;
  }
  
  // Simple ASCII banner
  output.innerHTML += "\n";
  output.innerHTML += "\n+" + "-".repeat(text.length + 6) + "+";
  output.innerHTML += "\n|   " + text + "   |";
  output.innerHTML += "\n+" + "-".repeat(text.length + 6) + "+";
}

// Show command history
function showCommandHistory(output) {
  if (commandHistory.length === 0) {
    output.innerHTML += "\nNo command history.";
    return;
  }
  
  output.innerHTML += "\nCommand History:";
  
  // Show the most recent 20 commands
  const startIndex = Math.max(0, commandHistory.length - 20);
  for (let i = startIndex; i < commandHistory.length; i++) {
    output.innerHTML += `\n${i - startIndex + 1}: ${commandHistory[i]}`;
  }
}

// Show about information
function showAbout(output) {
  output.innerHTML += `
\n<span class="ascii-art">${asciiArt.logo}</span>
\n<span style="color: var(--terminal-header);">dfinn.me Terminal v2.0</span>
\n
\nA terminal-style portfolio interface designed to showcase projects and programming skills.
\n
\nFeatures:
\n- File system navigation
\n- Visual effects and themes
\n- Project showcase and quick access
\n- Math utilities and fun commands
\n- Weather display and system information
\n
\nType 'help' to see available commands.
\n
\nCreated by D. Finn
\nLast updated: March 2025
`;
}

// Matrix effect
function startMatrixEffect() {
  if (!matrixActive) return;
  
  const canvas = document.getElementById("matrix-canvas");
  const ctx = canvas.getContext("2d");
  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$+-*/=%\"'#&_(),.;:?!\\|{}<>[]^~";
  const fontSize = 16;
  const columns = canvas.width / fontSize;
  
  const drops = [];
  for (let i = 0; i < columns; i++) {
    drops[i] = Math.floor(Math.random() * -100);
  }
  
  function draw() {
    if (!matrixActive) return;
    
    ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = "#0f0";
    ctx.font = fontSize + "px monospace";
    
    for (let i = 0; i < drops.length; i++) {
      const text = chars.charAt(Math.floor(Math.random() * chars.length));
      ctx.fillText(text, i * fontSize, drops[i] * fontSize);
      
      if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
        drops[i] = 0;
      }
      
      drops[i]++;
    }
    
    requestAnimationFrame(draw);
  }
  
  draw();
}

// Utility functions
function scrollToBottom() {
  const output = document.getElementById("output");
  output.scrollTop = output.scrollHeight;
}

function updateDateTime() {
  const datetimeDisplay = document.getElementById("datetime");
  const now = new Date();
  datetimeDisplay.textContent = now.toLocaleTimeString();
}

function updatePrompt() {
  const prompt = document.getElementById("prompt");
  prompt.textContent = `${username}@dfinn.me:${currentDir}$ `;
  
  const currentDirDisplay = document.getElementById("current-dir");
  currentDirDisplay.textContent = currentDir;
}

function typeMessage(message, element, speed, callback) {
  let i = 0;
  function typeChar() {
    if (i < message.length) {
      element.innerHTML += message.charAt(i);
      i++;
      scrollToBottom();
      setTimeout(typeChar, speed);
    } else if (callback) {
      callback();
    }
  }
  typeChar();
}

function getCurrentPath() {
  if (currentDir === "~") {
    return directoryStructure["~"];
  }
  
  return navigatePath(currentDir);
}

function navigatePath(path) {
  // Clean up path
  if (path === "~") {
    return directoryStructure["~"];
  }
  
  // Convert path to array of parts
  const parts = path.replace(/^~\//, "").split("/").filter(Boolean);
  let current = directoryStructure["~"];
  
  for (const part of parts) {
    if (part === "..") {
      // Go up one level
      continue;
    }
    
    if (!current.content || !current.content[part]) {
      return null; // Path not found
    }
    
    current = current.content[part];
  }
  
  return current;
}

function getCommandCount() {
  // Count the unique commands available in the terminal
  return 30; // Approximate count of all commands
}

// Handle window resize for matrix effect
window.addEventListener("resize", function() {
  if (matrixActive) {
    const canvas = document.getElementById("matrix-canvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
});

// Terminal control buttons
document.querySelector(".button-minimize").addEventListener("click", function() {
  const terminal = document.getElementById("terminal-window");
  if (terminal.style.display === "none") {
    terminal.style.display = "flex";
  } else {
    terminal.style.display = "none";
  }
});

document.querySelector(".button-expand").addEventListener("click", function() {
  document.documentElement.requestFullscreen().catch(err => {
    console.log("Fullscreen request failed: ", err);
  });
});

document.querySelector(".button-close").addEventListener("click", function() {
  document.getElementById("output").innerHTML += "\nUse 'clear' to reset the terminal.";
  scrollToBottom();
});
  </script>
</body>
</html>
</antArtifact>
<!--
This enhanced terminal interface includes many improvements:

### Visual and Interface Improvements:
- Modern terminal design with header, status bar, and command prompt
- Theme system with 6 different themes (default, matrix, dracula, nord, monokai, cyberpunk)
- Animated typing effects for welcome messages
- Blinking cursor and better text formatting
- Improved scrolling and command history navigation
- Terminal control buttons (minimize, expand, close)

### New Commands and Features:
1. **File System Navigation:**
   - `ls`, `cd`, and `cat` commands for a simulated directory structure
   - File and directory organization

2. **System Information:**
   - `neofetch` command to display system info in a fancy format
   - `whoami` and `date` commands
   - Status bar with username and current directory
   - Command history with `history` command

3. **Visual Effects:**
   - Enhanced Matrix effect with better visuals
   - Added hacker effect (flashing green screen)
   - Improved glitch, shake, and spin effects
   - ASCII art display with `ascii` command
   - Banner creation with `banner` command

4. **Project Navigation:**
   - Simplified project launching with `run [project]` command
   - Added placeholder for Flappy Bird game
   - Better organization of project links

5. **Utilities:**
   - Mock weather display with `weather [city]` command
   - Tab completion for commands
   - Arrow key navigation through command history
   - About information and improved help system

The design now looks and feels much more like a real terminal, with a professional appearance and smooth animations. I've preserved all your original commands while adding many new features to create a more engaging and impressive interface for visitors to your domain.
-->
